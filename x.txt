SET NAMES utf8;
SET foreign_key_checks = 0;
SET time_zone = SYSTEM;
SET sql_mode = NO_AUTO_VALUE_ON_ZERO;
DROP TABLE IF EXISTS pivo;
DROP TABLE IF EXISTS slad;
DROP TABLE IF EXISTS chmel;
DROP TABLE IF EXISTS kvasnice;
DROP TABLE IF EXISTS zaznam_vypiteho_piva;
DROP TABLE IF EXISTS hodnoceni;
DROP TABLE IF EXISTS uzivatel;
DROP TABLE IF EXISTS hospoda;
DROP TABLE IF EXISTS pivovar;
DROP TABLE IF EXISTS doba_vareni;
DROP TABLE IF EXISTS sladek;
CREATE TABLE pivo(ID_pivo INT NOT NULL AUTO_INCREMENT,nazev VARCHAR(25) NOT NULL,stupen_EBC INT NOT NULL,styl_kvaseni VARCHAR(25) NOT NULL,typ_piva VARCHAR(25) NOT NULL,obsah_alkoholu INT NOT NULL, ID_slad INT NOT NULL , ID_chmel INT NOT NULL,ID_kvasnice INT NOT NULL ,PRIMARY KEY (ID_pivo), KEY ID_kvasnice (ID_kvasnice),KEY ID_chmel (ID_chmel) ,KEY ID_slad (ID_slad)) ENGINE=InnoDB;
CREATE TABLE slad(ID_slad INT NOT NULL AUTO_INCREMENT,barva VARCHAR(25) NOT NULL,puvod VARCHAR(25) NOT NULL,extrakt VARCHAR(25) NOT NULL, PRIMARY KEY (ID_slad)) ENGINE=InnoDB;
CREATE TABLE chmel(ID_chmel INT NOT NULL AUTO_INCREMENT,puvod VARCHAR(25) NOT NULL,doba_sklizne VARCHAR(25) NOT NULL,aroma VARCHAR(25) NOT NULL,horkost INT NOT NULL,podil_alfa_kyselin INT NOT NULL, PRIMARY KEY (ID_chmel)) ENGINE=InnoDB;
CREATE TABLE kvasnice(ID_kvasnice INT NOT NULL AUTO_INCREMENT,skupenstvi VARCHAR(25) NOT NULL,typ_kvaseni VARCHAR(25) NOT NULL, PRIMARY KEY(ID_kvasnice)) ENGINE=InnoDB;
CREATE TABLE zaznam_vypiteho_piva(login VARCHAR(25) NOT NULL,ID_pivo INT NOT NULL,datum DATE NOT NULL,cas VARCHAR(25) NOT NULL, PRIMARY KEY (login,ID_pivo)) ENGINE=InnoDB;
CREATE TABLE doba_vareni(ID_pivo INT NOT NULL,ID_sladka INT NOT NULL,od timestamp NOT NULL,do timestamp NOT NULL, PRIMARY KEY (ID_pivo,ID_sladka)) ENGINE=InnoDB;
CREATE TABLE hodnoceni(ID_pivo INT NOT NULL,login VARCHAR(25) NOT NULL,ID_hospoda INT NOT NULL,znamka INT NOT NULL,datum DATE NOT NULL,cas VARCHAR(25) NOT NULL, PRIMARY KEY (ID_pivo,login,ID_hospoda)) ENGINE=InnoDB;
CREATE TABLE hospoda(ID_hospoda INT NOT NULL AUTO_INCREMENT,nazev VARCHAR(25) NOT NULL,adr_mesto VARCHAR(30) NOT NULL,adr_ulice VARCHAR(30) NOT NULL,adr_cislo_domu INT NOT NULL,PSC INT NOT NULL, PRIMARY KEY (ID_hospoda)) ENGINE=InnoDB;
CREATE TABLE pivovar(ID_pivovar INT NOT NULL AUTO_INCREMENT,nazev VARCHAR(25) NOT NULL,adr_mesto VARCHAR(30) NOT NULL,adr_ulice VARCHAR(30) NOT NULL,adr_cislo_domu INT NOT NULL,PSC INT (5) NOT NULL, ID_pivo INT NOT NULL, PRIMARY KEY (ID_pivovar),KEY ID_pivo (ID_pivo) ) ENGINE=InnoDB;
CREATE TABLE uzivatel(login VARCHAR(25) NOT NULL,heslo VARCHAR(25) NOT NULL, PRIMARY KEY (login)) ENGINE=InnoDB;
CREATE TABLE sladek(ID_sladka INT NOT NULL AUTO_INCREMENT,login VARCHAR(25) NOT NULL,jmeno VARCHAR(25) NOT NULL,prijmeni VARCHAR(25) NOT NULL,adr_mesto VARCHAR(30) NOT NULL,adr_ulice VARCHAR(30) NOT NULL,adr_cislo_domu INT NOT NULL,PSC INT (5) NOT NULL, ID_pivo INT NOT NULL,ID_pivovar INT NOT NULL , PRIMARY KEY (ID_sladka),KEY ID_pivo (ID_pivo) , KEY ID_pivovar (ID_pivovar)) ENGINE=InnoDB;
ALTER TABLE pivo ADD CONSTRAINT kod_sladu FOREIGN KEY (ID_slad) REFERENCES slad(ID_slad) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE pivo ADD CONSTRAINT kod_chmelu FOREIGN KEY (ID_chmel) REFERENCES chmel(ID_chmel) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE pivo ADD CONSTRAINT kod_kvasnice FOREIGN KEY (ID_kvasnice) REFERENCES kvasnice(ID_kvasnice) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE sladek ADD CONSTRAINT kod_sladka FOREIGN KEY (ID_pivo) REFERENCES pivo(ID_pivo) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE sladek ADD CONSTRAINT kod2_sladka FOREIGN KEY (ID_pivovar) REFERENCES pivovar(ID_pivovar) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE pivovar ADD CONSTRAINT kod_pivovar FOREIGN KEY (ID_pivo) REFERENCES pivo(ID_pivo) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE zaznam_vypiteho_piva ADD CONSTRAINT kod_uzivatel FOREIGN KEY (login) REFERENCES uzivatel(login) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE zaznam_vypiteho_piva ADD CONSTRAINT kod3_pivovar FOREIGN KEY (ID_pivo) REFERENCES pivo(ID_pivo) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE doba_vareni ADD CONSTRAINT kod4_pivo FOREIGN KEY (ID_pivo) REFERENCES pivo(ID_pivo) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE doba_vareni ADD CONSTRAINT kod4_sladek FOREIGN KEY (ID_sladka) REFERENCES sladek(ID_sladka) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE hodnoceni ADD CONSTRAINT kod2_uzivatel FOREIGN KEY (login) REFERENCES uzivatel(login) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE hodnoceni ADD CONSTRAINT kod4_pivovar FOREIGN KEY (ID_pivo) REFERENCES pivo(ID_pivo) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE hodnoceni ADD CONSTRAINT kod3_hospoda FOREIGN KEY (ID_hospoda) REFERENCES hospoda(ID_hospoda) ON DELETE CASCADE ON UPDATE CASCADE;
INSERT INTO slad (barva, puvod, extrakt) VALUES('karamelova', 'Nymburk', 'B335');
INSERT INTO slad (barva, puvod, extrakt) VALUES('svetla', 'Náchod', '16VV');
INSERT INTO slad (barva, puvod, extrakt) VALUES('bavorska', 'Náchod', 'H1Z1');
INSERT INTO chmel (puvod, doba_sklizne, aroma, horkost, podil_alfa_kyselin) VALUES('Zatecko', 'zari', 'prave', '24' ,'8');
INSERT INTO chmel (puvod, doba_sklizne, aroma, horkost, podil_alfa_kyselin) VALUES('Ustecko', 'zari', 'jemne', '32' ,'6');
INSERT INTO chmel (puvod, doba_sklizne, aroma, horkost, podil_alfa_kyselin) VALUES('Trsicko', 'rijen', 'korenene', '13', '5');
INSERT INTO kvasnice (skupenstvi, typ_kvaseni) VALUES('prasek', 'spodní');
INSERT INTO kvasnice (skupenstvi, typ_kvaseni) VALUES('prasek', 'svrchní');
INSERT INTO kvasnice (skupenstvi, typ_kvaseni) VALUES('roztok', 'svrchní');
INSERT INTO pivo (nazev, stupen_EBC, styl_kvaseni, typ_piva, obsah_alkoholu,ID_slad,ID_chmel,ID_kvasnice) VALUES('Janek', '11','svrchni', 'vycepni', '4','1','1','1');
INSERT INTO pivo (nazev, stupen_EBC, styl_kvaseni, typ_piva, obsah_alkoholu,ID_slad,ID_chmel,ID_kvasnice) VALUES('Lesnik', '11','svrchni', 'vycepni', '5','2','2','2');
INSERT INTO pivo (nazev, stupen_EBC, styl_kvaseni, typ_piva, obsah_alkoholu,ID_slad,ID_chmel,ID_kvasnice) VALUES('Javor', '11','spodni', 'lezak', '6','2','2','2');
INSERT INTO pivo (nazev, stupen_EBC, styl_kvaseni, typ_piva, obsah_alkoholu,ID_slad,ID_chmel,ID_kvasnice) VALUES('Doubek', '12','svrchni', 'lezak', '7','1','1','1');
INSERT INTO uzivatel(login, heslo) VALUES ('Leviathan', 'M89599E');
INSERT INTO uzivatel(login, heslo) VALUES ('Behemoth', 'linac8E');
INSERT INTO uzivatel(login, heslo) VALUES ('Habakkuk', 'hell4ouc8E');
INSERT INTO uzivatel(login, heslo) VALUES ('admin', 'admin');
INSERT INTO hospoda (nazev, adr_mesto, adr_ulice, adr_cislo_domu ,PSC) VALUES('Sokolovna', 'Cheb', 'Failova', '12', '51722');
INSERT INTO hospoda (nazev, adr_mesto, adr_ulice, adr_cislo_domu ,PSC) VALUES('Ruze',  'Jihlava', 'Erbenova', '55', '51366');
INSERT INTO hospoda (nazev, adr_mesto, adr_ulice, adr_cislo_domu ,PSC) VALUES('Platan', 'Pardubice', 'Tylova', '666', '51177');
INSERT INTO zaznam_vypiteho_piva (ID_pivo, login, datum, cas) VALUES('1', 'Leviathan' , '10-4-2008', '12:30');
INSERT INTO zaznam_vypiteho_piva (ID_pivo, login, datum, cas) VALUES('3', 'Habakkuk', '25-9-2012', '7:35');
INSERT INTO zaznam_vypiteho_piva (ID_pivo, login, datum, cas) VALUES('2','Behemoth', '1-1-2011', '8:00');
INSERT INTO pivovar (nazev, adr_mesto, adr_ulice, adr_cislo_domu ,PSC,ID_pivo) VALUES('Clock', 'Slemeno', 'Dlouhá', '3', '51933','1');
INSERT INTO pivovar (nazev, adr_mesto, adr_ulice, adr_cislo_domu ,PSC,ID_pivo) VALUES('Rondo', 'Synkov', 'Krátká', '2', '51915','2');
INSERT INTO pivovar (nazev, adr_mesto, adr_ulice, adr_cislo_domu ,PSC,ID_pivo) VALUES('Fortel', 'Rataje', 'Akorát', '1', '51916','3');
INSERT INTO sladek (login, jmeno, prijmeni, adr_mesto, adr_ulice, adr_cislo_domu ,PSC) VALUES('Habakkuk', 'Havel', 'Prokop', 'Rusnov', 'Jarní', '13', '51719');
INSERT INTO doba_vareni (ID_pivo, ID_sladka, od, do) VALUES('3', '1', '13-4-08', '10-4-11');
INSERT INTO hodnoceni (ID_pivo, login, ID_hospoda, znamka, datum, cas) VALUES('1', 'Leviathan', '3', '4', '14-8-2012', '10:20');
INSERT INTO hodnoceni (ID_pivo, login, ID_hospoda, znamka, datum, cas) VALUES('3', 'Behemoth', '2', '6', '6-9-2007', '16:40');
INSERT INTO hodnoceni (ID_pivo, login, ID_hospoda, znamka, datum, cas) VALUES('2', 'Habakkuk', '1', '7', '1-12-2009', '6:15');